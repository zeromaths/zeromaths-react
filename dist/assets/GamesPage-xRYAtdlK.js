import{j as e,r as s}from"./index-DGN68nc3.js";import{G as S}from"./GlassTitle-Be_ZHQQX.js";import{H as G}from"./HomeBanner-CwCQSgaM.js";function I({game:a,onPlay:u}){const f=Array.from({length:3},(o,x)=>e.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${x<a.difficulty?"bg-primary dark:bg-primary-dark":"bg-gray-300 dark:bg-gray-600"}`},x)),m=o=>{o.preventDefault(),a.available?u(a.id):alert("Ce jeu sera bientôt disponible !")};return e.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:shadow-xl hover:-translate-y-1 flex flex-col h-full group",children:[e.jsxs("div",{className:"game-image h-48 overflow-hidden relative",children:[e.jsx("img",{src:a.imageUrl,alt:`Illustration pour le jeu ${a.title}`,className:"w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-110",onError:o=>{o.target.onerror=null,o.target.src="https://placehold.co/400x200/e0e0e0/757575?text=Image",o.target.alt="Image indisponible"},loading:"lazy"}),!a.available&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-semibold bg-gray-700/80 px-3 py-1 rounded",children:"Bientôt !"})})]}),e.jsxs("div",{className:"game-content p-5 flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:a.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 flex-grow",children:a.description}),e.jsxs("div",{className:"game-footer flex justify-between items-center mt-auto",children:[e.jsxs("div",{className:"difficulty flex items-center","aria-label":`Difficulté ${a.difficulty} sur 3`,children:[e.jsx("span",{className:"difficulty-label text-xs text-gray-500 dark:text-gray-400 mr-2","aria-hidden":"true",children:"Difficulté :"}),e.jsx("div",{className:"difficulty-dots flex","aria-hidden":"true",children:f})]}),e.jsxs("button",{onClick:m,disabled:!a.available,className:`play-button inline-flex items-center px-4 py-1.5 rounded-md text-sm font-semibold transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 ${a.available?"text-white bg-gradient-to-r from-primary to-secondary hover:from-primary-dark hover:to-secondary-dark dark:from-primary-dark dark:to-secondary-dark dark:hover:from-primary-dark-dark dark:hover:to-secondary-dark-dark focus:ring-primary dark:focus:ring-primary-dark":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,"aria-disabled":!a.available,children:[e.jsx("i",{className:"fas fa-play mr-1.5 text-xs","aria-hidden":"true"})," Jouer"]})]})]})]})}function T({onClose:a}){const[u,f]=s.useState(0),[m,o]=s.useState(0),[x,i]=s.useState(""),[M,$]=s.useState([]),[v,E]=s.useState(0),[j,h]=s.useState(""),[N,w]=s.useState(!1),b=s.useRef(null),C=s.useCallback(t=>{let r=t.length,l;for(;r!==0;)l=Math.floor(Math.random()*r),r--,[t[r],t[l]]=[t[l],t[r]];return t},[]),p=s.useCallback(()=>{w(!1),h("");let t=Math.floor(Math.random()*20)+1,r=Math.floor(Math.random()*20)+1;const l=["+","-","×"],d=l[Math.floor(Math.random()*l.length)];let n,c;switch(d){case"+":n=t+r,c=`${t} + ${r} = ?`;break;case"-":t<r&&([t,r]=[r,t]),n=t-r,c=`${t} - ${r} = ?`;break;case"×":r=Math.floor(Math.random()*10)+1,n=t*r,c=`${t} × ${r} = ?`;break;default:n=0,c="Erreur"}i(c),E(n);const g=[n];for(;g.length<4;){let y=Math.floor(Math.random()*10)-5;y===0&&(y+=Math.random()<.5?-1:1);let k=n+y;k>=0&&!g.includes(k)&&g.push(k)}$(C(g))},[C]);s.useEffect(()=>{p(),b.current&&b.current.focus();const t=r=>{r.key==="Escape"&&a()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[p,a]);const A=t=>{if(N)return;w(!0),o(d=>d+1);const r=t===v;r?(f(d=>d+1),h("Correct !")):h(`Incorrect. La réponse était ${v}.`);const l=document.getElementById("calcul-mental-game-content");if(l){const d=["bg-green-100","dark:bg-green-900/50"],n=["bg-red-100","dark:bg-red-900/50"],c=r?d:n,g=r?n:d;l.classList.add(...c),l.classList.remove(...g),setTimeout(()=>l.classList.remove(...c),500)}setTimeout(p,1200)};return e.jsx("div",{id:"calcul-mental-game-modal",className:"fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center z-[1001] p-4 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"calcul-mental-title",ref:b,tabIndex:-1,children:e.jsxs("div",{id:"calcul-mental-game-content",className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 md:p-8 w-full max-w-md text-center relative transform transition-all duration-300 scale-100",children:[e.jsx("button",{onClick:a,className:"absolute top-2 right-2 text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 text-3xl leading-none p-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 rounded-full","aria-label":"Fermer le jeu",children:"×"}),e.jsx("h2",{id:"calcul-mental-title",className:"text-2xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Calcul Mental Express"}),e.jsx("div",{className:"game-question text-4xl font-bold my-8 text-primary dark:text-primary-dark min-h-[3rem] flex items-center justify-center",children:x||"..."}),e.jsxs("div",{className:`text-sm mb-4 min-h-[1.25rem] font-medium ${j.startsWith("Correct")?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[j||" "," "]}),e.jsx("div",{className:"game-options grid grid-cols-2 gap-4 my-8",children:M.map((t,r)=>e.jsx("button",{onClick:()=>A(t),className:"game-option bg-gray-100 dark:bg-gray-700 border-2 border-gray-200 dark:border-gray-600 rounded-lg p-4 text-2xl font-semibold cursor-pointer transition-all duration-300 hover:bg-blue-100 dark:hover:bg-orange-800/50 hover:border-primary dark:hover:border-primary-dark hover:scale-105 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:focus:ring-primary-dark disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:scale-100",disabled:N,children:t},r))}),e.jsxs("div",{className:"game-score text-lg mt-6 text-gray-700 dark:text-gray-300",children:["Score : ",e.jsx("span",{className:"font-bold",children:u})," / ",e.jsx("span",{className:"font-bold",children:m})]}),e.jsx("div",{className:"game-controls mt-8",children:e.jsx("button",{onClick:a,className:"close-game px-5 py-2 rounded-md bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 font-semibold hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-300",children:"Quitter le jeu"})})]})})}function z({level:a,games:u}){const[f,m]=s.useState(null),o=s.useCallback(i=>{i==="calcul-mental"?m(i):(console.warn(`Tentative de lancement du jeu non implémenté: ${i}`),alert("Ce jeu n'est pas encore disponible."))},[]),x=s.useCallback(()=>{m(null)},[]);return Array.isArray(u)?e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Jeux mathématiques",subtitle:"Apprendre en s'amusant"}),e.jsx(G,{title:`Jeux mathématiques pour la ${a}`,text:"Découvrez notre sélection de jeux mathématiques conçus pour rendre l'apprentissage amusant et engageant. Choisissez un jeu ci-dessous et commencez à jouer dès maintenant !"}),e.jsx("section",{className:"game-container max-w-6xl mx-auto px-4 py-8",children:e.jsx("div",{className:"game-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.length>0?u.map(i=>e.jsx(I,{game:i,onPlay:o},i.id)):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 col-span-full",children:"Aucun jeu disponible pour cette section pour le moment."})})}),f==="calcul-mental"&&e.jsx(T,{onClose:x})]}):(console.error(`GamesPage (${a}): 'games' prop is not a valid array.`),e.jsxs("div",{className:"text-center p-10 text-red-500",children:["Erreur : Impossible de charger les jeux pour le niveau ",a,"."]}))}export{z as default};
