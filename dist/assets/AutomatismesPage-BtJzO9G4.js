import{r as o,j as e}from"./index-DGN68nc3.js";import{G as $}from"./GlassTitle-Be_ZHQQX.js";import{H as I}from"./HomeBanner-CwCQSgaM.js";function N({question:i,answer:l,isResetting:d,onClick:s}){const[n,t]=o.useState(!1);o.useEffect(()=>{d&&t(!1)},[d]);const u=()=>{const c=!n;t(c),s&&s(c)};return e.jsx("button",{onClick:u,className:`automatisme-item bg-white dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-3 md:p-4 text-center cursor-pointer transition-all duration-300 text-sm md:text-base font-medium hover:scale-105 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-primary dark:focus:ring-primary-dark ${n?"bg-green-100 dark:bg-green-900/30 border-green-400 dark:border-green-600 text-green-800 dark:text-green-300 font-bold":"text-gray-700 dark:text-gray-300"}`,"aria-pressed":n,children:n?l:i})}function x({title:i,description:l,items:d,resetSignal:s}){const n=(t,u)=>{};return Array.isArray(d)?e.jsxs("div",{className:"automatisme-card bg-white dark:bg-gray-800/50 rounded-xl p-6 mb-8 shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"automatisme-title text-lg md:text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 pb-2 border-b-2 border-primary dark:border-primary-dark",children:i}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-5",children:l}),e.jsx("div",{className:"automatisme-grid grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:d.map((t,u)=>e.jsx(N,{question:t.question,answer:t.answer,isResetting:s,onClick:c=>n()},`${i}-item-${u}-${t.question}`))})]}):(console.error(`AutomatismeGrid (${i}): La prop 'items' doit être un tableau.`),e.jsxs("div",{className:"text-red-500 p-4",children:['Erreur: Données invalides pour la grille "',i,'".']}))}function T({level:i}){const[l,d]=o.useState(180),[s,n]=o.useState(!1),[t,u]=o.useState(!1),[c,p]=o.useState(!1),g=o.useRef(null),{multiplicationItems:y,calculItems:w,fractionItems:k}=o.useMemo(()=>{const m=Array.from({length:30},()=>{const r=Math.floor(Math.random()*9)+2,a=Math.floor(Math.random()*9)+2;return{question:`${r} × ${a}`,answer:r*a}}),j=Array.from({length:20},()=>{const r=Math.floor(Math.random()*50)+1,a=Math.floor(Math.random()*50)+1,h=Math.random()<.5?"+":"-";return h==="+"&&r+a<=100?{question:`${r} + ${a}`,answer:r+a}:h==="-"&&r>a?{question:`${r} - ${a}`,answer:r-a}:{question:`${r} + ${a%10}`,answer:r+a%10}}),f=[{question:"2/4",answer:"1/2"},{question:"6/8",answer:"3/4"},{question:"5/10",answer:"1/2"},{question:"3/9",answer:"1/3"},{question:"10/15",answer:"2/3"},{question:"8/12",answer:"2/3"},{question:"4/16",answer:"1/4"},{question:"9/12",answer:"3/4"},{question:"6/10",answer:"3/5"},{question:"12/16",answer:"3/4"},{question:"14/21",answer:"2/3"},{question:"15/20",answer:"3/4"},{question:"18/24",answer:"3/4"},{question:"20/25",answer:"4/5"},{question:"7/14",answer:"1/2"},{question:"9/15",answer:"3/5"}];for(let r=f.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[f[r],f[a]]=[f[a],f[r]]}return{multiplicationItems:m,calculItems:j,fractionItems:f}},[]);o.useEffect(()=>(s&&l>0?g.current=setInterval(()=>d(m=>m-1),1e3):l<=0&&(clearInterval(g.current),s&&(n(!1),u(!0))),()=>clearInterval(g.current)),[s,l]);const v=()=>{t||n(!s)},q=()=>{clearInterval(g.current),n(!1),d(180),u(!1),p(!0),setTimeout(()=>p(!1),50)},b=o.useCallback(m=>`${Math.floor(m/60).toString().padStart(2,"0")}:${(m%60).toString().padStart(2,"0")}`,[]);return e.jsxs(e.Fragment,{children:[e.jsx($,{title:`Automatismes de ${i}`,subtitle:"Entraînement rapide aux calculs de base"}),e.jsx(I,{title:"Entraînement aux automatismes",text:`Lancez le chrono (${b(180)})...`}),e.jsxs("div",{className:"timer-container flex flex-col items-center my-8 sticky top-[70px] md:top-[80px] z-10 py-4 bg-gray-100/80 dark:bg-gray-900/80 backdrop-blur-sm rounded-b-lg shadow-sm",children:[e.jsx("div",{className:`timer text-4xl font-bold p-3 rounded-lg shadow-inner mb-4 ${t?"text-red-500":"text-gray-800 dark:text-gray-100"} bg-white dark:bg-gray-700`,children:t?"Terminé !":b(l)}),e.jsxs("div",{className:"control-buttons flex justify-center gap-4",children:[e.jsxs("button",{onClick:v,disabled:t,className:`control-button start-button flex items-center px-6 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 ${t?"bg-gray-400 text-gray-600 cursor-not-allowed":s?"bg-yellow-500 hover:bg-yellow-600 text-white focus:ring-yellow-500":"bg-gradient-to-r from-primary to-secondary dark:from-primary-dark dark:to-secondary-dark text-white hover:shadow-lg focus:ring-primary dark:focus:ring-primary-dark"}`,"aria-live":"polite",children:[e.jsx("i",{className:`fas ${s?"fa-pause":"fa-play"} mr-2`,"aria-hidden":"true"}),s?"Pause":t?"Terminé":"Démarrer"]}),e.jsxs("button",{onClick:q,className:"control-button reset-button flex items-center px-6 py-2 rounded-lg font-semibold bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:[e.jsx("i",{className:"fas fa-redo-alt mr-2","aria-hidden":"true"})," Réinitialiser"]})]})]}),e.jsxs("div",{className:"automatisme-container max-w-4xl mx-auto px-4 pb-8 pt-4",children:[e.jsx(x,{title:"Tables de multiplication",description:"Cliquez pour afficher la réponse.",items:y,resetSignal:c}),e.jsx(x,{title:"Calcul mental (+/-)",description:"Cliquez pour afficher la réponse.",items:w,resetSignal:c}),e.jsx(x,{title:"Fractions simples (Simplification)",description:"Cliquez pour afficher la réponse.",items:k,resetSignal:c})]})]})}export{T as default};
